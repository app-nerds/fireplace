/* Copyright Â© 2022 App Nerds LLC v1.0.0 */
const alertPosition={TopLeft:"top-left",TopCenter:"top-center",TopRight:"top-right",BottomLeft:"bottom-left",BottomCenter:"bottom-center",BottomRight:"bottom-right"},alertPositionIndex=[[alertPosition.TopLeft,alertPosition.TopCenter,alertPosition.TopRight],[alertPosition.BottomLeft,alertPosition.BottomCenter,alertPosition.BottomRight]],svgs={success:'<svg viewBox="0 0 426.667 426.667" width="18" height="18"><path d="M213.333 0C95.518 0 0 95.514 0 213.333s95.518 213.333 213.333 213.333c117.828 0 213.333-95.514 213.333-213.333S331.157 0 213.333 0zm-39.134 322.918l-93.935-93.931 31.309-31.309 62.626 62.622 140.894-140.898 31.309 31.309-172.203 172.207z" fill="#6ac259"></path></svg>',warn:'<svg viewBox="0 0 310.285 310.285" width=18 height=18> <path d="M264.845 45.441C235.542 16.139 196.583 0 155.142 0 113.702 0 74.743 16.139 45.44 45.441 16.138 74.743 0 113.703 0 155.144c0 41.439 16.138 80.399 45.44 109.701 29.303 29.303 68.262 45.44 109.702 45.44s80.399-16.138 109.702-45.44c29.303-29.302 45.44-68.262 45.44-109.701.001-41.441-16.137-80.401-45.439-109.703zm-132.673 3.895a12.587 12.587 0 0 1 9.119-3.873h28.04c3.482 0 6.72 1.403 9.114 3.888 2.395 2.485 3.643 5.804 3.514 9.284l-4.634 104.895c-.263 7.102-6.26 12.933-13.368 12.933H146.33c-7.112 0-13.099-5.839-13.345-12.945L128.64 58.594c-.121-3.48 1.133-6.773 3.532-9.258zm23.306 219.444c-16.266 0-28.532-12.844-28.532-29.876 0-17.223 12.122-30.211 28.196-30.211 16.602 0 28.196 12.423 28.196 30.211.001 17.591-11.456 29.876-27.86 29.876z" fill="#FFDA44" /> </svg>',info:'<svg viewBox="0 0 23.625 23.625" width=18 height=18> <path d="M11.812 0C5.289 0 0 5.289 0 11.812s5.289 11.813 11.812 11.813 11.813-5.29 11.813-11.813S18.335 0 11.812 0zm2.459 18.307c-.608.24-1.092.422-1.455.548a3.838 3.838 0 0 1-1.262.189c-.736 0-1.309-.18-1.717-.539s-.611-.814-.611-1.367c0-.215.015-.435.045-.659a8.23 8.23 0 0 1 .147-.759l.761-2.688c.067-.258.125-.503.171-.731.046-.23.068-.441.068-.633 0-.342-.071-.582-.212-.717-.143-.135-.412-.201-.813-.201-.196 0-.398.029-.605.09-.205.063-.383.12-.529.176l.201-.828c.498-.203.975-.377 1.43-.521a4.225 4.225 0 0 1 1.29-.218c.731 0 1.295.178 1.692.53.395.353.594.812.594 1.376 0 .117-.014.323-.041.617a4.129 4.129 0 0 1-.152.811l-.757 2.68a7.582 7.582 0 0 0-.167.736 3.892 3.892 0 0 0-.073.626c0 .356.079.599.239.728.158.129.435.194.827.194.185 0 .392-.033.626-.097.232-.064.4-.121.506-.17l-.203.827zm-.134-10.878a1.807 1.807 0 0 1-1.275.492c-.496 0-.924-.164-1.28-.492a1.57 1.57 0 0 1-.533-1.193c0-.465.18-.865.533-1.196a1.812 1.812 0 0 1 1.28-.497c.497 0 .923.165 1.275.497.353.331.53.731.53 1.196 0 .467-.177.865-.53 1.193z" fill="#006DF0" /> </svg>',error:'<svg viewBox="0 0 51.976 51.976" width=18 height=18> <path d="M44.373 7.603c-10.137-10.137-26.632-10.138-36.77 0-10.138 10.138-10.137 26.632 0 36.77s26.632 10.138 36.77 0c10.137-10.138 10.137-26.633 0-36.77zm-8.132 28.638a2 2 0 0 1-2.828 0l-7.425-7.425-7.778 7.778a2 2 0 1 1-2.828-2.828l7.778-7.778-7.425-7.425a2 2 0 1 1 2.828-2.828l7.425 7.425 7.071-7.071a2 2 0 1 1 2.828 2.828l-7.071 7.071 7.425 7.425a2 2 0 0 1 0 2.828z" fill="#D80027" /> </svg>'};function setup(){const e=document.createElement("div");e.className="alert-container";for(const t of[0,1]){const n=document.createElement("div");n.className="alert-row";for(const o of[0,1,2]){const i=document.createElement("div");i.className="alert-col "+alertPositionIndex[t][o],n.appendChild(i)}e.appendChild(n)}document.body.appendChild(e)}function alert(l={title:void 0,position:alertPosition.TopRight,duration:3e3,closable:!0,focusable:!0,callback:void 0}){function n(e="Welcome to NerdAlert!",t,n){t={...l,...t};const o=document.getElementsByClassName(t.position)[0],i=document.createElement("div");i.className="alert-card "+n,i.innerHTML+=svgs[n],i.options={...t,message:e,type:n,yPos:-1<t.position.indexOf("top")?"top":"bottom",inFocus:!1};{e=i;const a=document.createElement("div");a.className="text-group",e.options.title&&(a.innerHTML=`<h4>${e.options.title}</h3>`),a.innerHTML+=`<p>${e.options.message}</p>`,e.appendChild(a)}var s,r;(s=i).style.setProperty("margin-"+s.options.yPos,"-15px"),s.style.setProperty("opacity","0"),setTimeout(()=>{s.style.setProperty("margin-"+s.options.yPos,"15px"),s.style.setProperty("opacity","1")},50),(r=i).addEventListener("click",()=>{r.options.closable&&u(r)}),r.addEventListener("mouseover",()=>{r.options.isFocus=r.options.focusable}),r.addEventListener("mouseout",()=>{r.options.isFocus=!1,c(r,r.options.duration)}),c(i),o.appendChild(i)}function c(e){0!==e.options.duration&&setTimeout(()=>{e.options.isFocus||u(e)},e.options.duration)}function u(e){e.style.setProperty("margin-"+e.options.yPos,`-${e.offsetHeight}px`),e.style.setProperty("opacity","0"),setTimeout(()=>{e.remove(),"function"==typeof e.options.callback&&e.options.callback()},500)}return document.getElementsByClassName("alert-container").length||setup(),{success(e,t){n(e,t,"success")},info(e,t){n(e,t,"info")},warn(e,t){n(e,t,"warn")},error(e,t){n(e,t,"error")}}}function shim(i={closeOnClick:!1}){function t(t){t={...i,...t};let n=void 0;function e(){n||document.getElementsByClassName("shim").length?document.getElementsByClassName("shim").length&&(n=document.getElementsByClassName("shim")[0]):((n=document.createElement("div")).style.top=document.documentElement.getBoundingClientRect().top+"px",n.style.height=function(){const e=document.body,t=document.documentElement;var n=e.getBoundingClientRect().height,o=t.getBoundingClientRect().height;return Math.max(n,o)}()+"px",n.classList.add("shim"),t.closeOnClick&&n.addEventListener("click",e=>{o(!0)}),document.body.appendChild(n))}function o(e=!0){n&&(n.remove(),n=void 0,"function"==typeof t.callback&&e&&t.callback())}return{hide(e=!0){o(e)},show(){e()}}}return{new(e){return t(e={callback:void 0,...e})}}}function confirm(d={width:"25%",height:"25%",callback:void 0}){const p=shim({closeOnClick:!0});let h;function o(t,e,n){n={...d,...n};const o=document.createElement("div");o.classList.add("confirm-container"),o.style.setProperty("width",n.width),o.style.setProperty("height",n.height),o.style.setProperty("top",`calc((50% - ${n.height}) + ${s=document.body.getBoundingClientRect(),Math.abs(s.top)}px)`),o.style.setProperty("left",`calc(50% - (${n.width}/2))`),h=p.new({callback:()=>{m(o,n.callback,!1)}}),o.innerHTML+=`<p>${e}</p>`;{var i=o,s=t,r=n.callback;let e=[];if("yesno"===s){const l=document.createElement("button"),c=(l.innerText="No",l.classList.add("cancel-button"),l.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h.hide(!1),m(i,r,!1)}),document.createElement("button"));c.innerText="Yes",c.classList.add("action-button"),c.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h.hide(!1),m(i,r,!0)}),e.push(l),e.push(c)}else{const u=document.createElement("button");u.innerText="Close",u.classList.add("action-button"),u.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h.hide(!1),m(i,r)}),e.push(u)}const a=document.createElement("div");a.classList.add("button-row"),e.forEach(e=>{a.appendChild(e)}),i.appendChild(a)}h.show(),document.body.appendChild(o)}function m(e,t,n){e.remove(),"function"==typeof t&&t(n)}return{confirm(e,t){o("confirm",e,t)},yesNo(e,n){return new Promise(t=>{n={callback:e=>t(e),...n},o("yesno",e,n)})}}}class PopupMenu extends HTMLElement{constructor(){super(),this._trigger=null,this._el=null}connectedCallback(){if(this._trigger=this.getAttribute("trigger"),!this._trigger)throw new Error("You must provide a query selector for the element used to trigger this popup.");this.style.visibility="hidden",document.querySelector(this._trigger).addEventListener("click",this.toggle.bind(this))}disconnectedCallback(){let e=document.querySelector(this._trigger);e&&e.removeEventListener("click",this.toggle.bind(this))}toggle(e){e&&e.preventDefault();var e=document.querySelector(this._trigger).getBoundingClientRect(),t=this.getBoundingClientRect();t.right>window.innerWidth?this.style.left=e.x+(window.innerWidth-t.right)-3+"px":this.style.left=e.x+"px",this.style.top=e.y+e.height+3+"px","hidden"===this.style.visibility?this.style.visibility="visible":this.style.visibility="hidden"}}class PopupMenuItem extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){var e=this.getAttribute("text"),t=this.getAttribute("icon");const n=document.createElement("div");n.classList.add("popup-menu-item");let o="";t&&(o+=`<i data-feather="${t}"></i> `),o+=e,n.innerHTML=o,n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{detail:e}));const t=e.target.parentElement.parentElement;t.style.visibility="hidden"}),this.insertAdjacentElement("beforeend",n)}}const showPopup=e=>{document.querySelector(e).style.visibility="visible"},hidePopup=e=>{document.querySelector(e).style.visibility="hidden"};function spinner(){let t=void 0;function e(){var e;t||((t=document.createElement("div")).classList.add("spinner"),t.style.top=(e=document.body.getBoundingClientRect(),Math.abs(e.top)+"px"),t.style.height=function(){const e=document.body,t=document.documentElement;var n=e.getBoundingClientRect().height,o=t.getBoundingClientRect().height;return Math.max(n,o)}()+"px",t.innerHTML=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="45" />
        </svg>
      `,document.body.appendChild(t))}return{hide(){t&&(t.remove(),t=void 0)},show(){e()}}}async function fetcher(e,t,n){let o;n&&(o=setTimeout(()=>{n.show()},1e3));e=await fetch(e,t);return n&&(clearTimeout(o),n.hide()),e}customElements.get("popup-menu")||customElements.define("popup-menu",PopupMenu),customElements.get("popup-menu-item")||customElements.define("popup-menu-item",PopupMenuItem);class GraphQL{constructor(e,t={http:fetcher,tokenGetterFunction:null,expiredTokenCallback:null,spinner:null}){t={http:fetcher,tokenGetterFunction:null,expiredTokenCallback:null,spinner:null,...t},this.queryURL=e,this.http=t.http,this.tokenGetterFunction=t.tokenGetterFunction,this.expiredTokenCallback=t.expiredTokenCallback,this.spinner=t.spinner}async query(n){if(!this.expiredTokenCallback||this.expiredTokenCallback()){var o=this.tokenGetterFunction?this.tokenGetterFunction():"";n=`query {
			${n}
		}`;let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},t=(o&&(e.headers.Authorization="Bearer "+o),await this.http(this.queryURL,e,this.spinner));if(400!==t.status&&401!==t.status){n=await t.json();if(t.ok)return n;throw new Error(n.message)}this.expiredTokenCallback&&this.expiredTokenCallback(t)}}async mutation(n){if(!this.expiredTokenCallback||this.expiredTokenCallback()){var o=this.tokenGetterFunction?this.tokenGetterFunction():"";n=`mutation {
			${n}
		}`;let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},t=(o&&(e.headers.Authorization="Bearer "+o),await this.http(this.queryURL,e,this.spinner));if(400!==t.status&&401!==t.status){n=await t.json();if(t.ok)return n;throw new Error(n.message)}this.expiredTokenCallback&&this.expiredTokenCallback()}}}const debounce=(t,n=400)=>{let o=null;return function(){let e=arguments;clearTimeout(o),o=setTimeout(()=>{t.apply(this,e)},n)}},objectToMap=(e={})=>{let t=new Map;for(const n in e)t.set(n,e[n]);return t},ErrTokenExpired="token expired";class SessionService{static clearToken(){window.sessionStorage.removeItem("token")}static getToken(){return window.sessionStorage.getItem("token")}static hasToken(){return null!==window.sessionStorage.getItem("token")}static navigateOnTokenExpired(e,t,n){e.message===ErrTokenExpired&&(SessionService.clearToken(),n(t))}static setToken(e){window.sessionStorage.setItem("token",e)}static tokenExpireFunc(e,t){return e&&401===e.status?(SessionService.clearToken(),SessionService.navigateOnTokenExpired({message:ErrTokenExpired},t),!1):!!SessionService.hasToken()||(SessionService.navigateOnTokenExpired({message:ErrTokenExpired},t),!1)}}class BaseView extends HTMLElement{constructor(e,t){super(),this._title="",this.params=e,this._state={},this._onRenderComplete=window._router.onRenderComplete||null,this.router=window._router}async connectedCallback(){await this.beforeRender(),await this.render(),this._setDocumentTitle(),await this.afterRender(),this._onRenderComplete&&this._onRenderComplete(this)}disconnectedCallback(){this.onUnload()}_setDocumentTitle(){var e=this.querySelectorAll("title");e&&0<e.length&&(this._title=e[0].innerText,document.title=this._title,this.removeChild(e[0]))}async beforeRender(){}async afterRender(){}async onUnload(){}async render(){throw new Error("not implemented")}get title(){return this._title}get html(){return this._html}get state(){return this._state}set state(e){this._state=e}getQueryParam(e){return this.router.getQueryParam(e)}navigateTo(e,t={},n={}){this.router.navigateTo(e,t,n)}}class DefaultPageNotFound extends BaseView{constructor(e){super(e)}async render(){return`
			<title>Page Not Found</title>
			<p>The page ${this.params.path} could not be found.</p>
		`}}customElements.get("default-page-not-found")||customElements.define("default-page-not-found",DefaultPageNotFound);class Router{constructor(e,t,n=null){this.targetEl=e,this.routes=t,this.pageNotFoundView=n,this.beforeRoute=null,this.afterRoute=null,this.injectParams=null,this.onRenderComplete=null,this.pageNotFoundView?this.routes.push({path:"/404notfound/:path",view:this.pageNotFoundView}):this.routes.push({path:"/404notfound/:path",view:DefaultPageNotFound})}_pathToRegex(e){return new RegExp("^"+e.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")}_getParams(e){let t=0;var n=e.result.slice(1),o=Array.from(e.route.path.matchAll(/:(\w+)/g)).map(e=>e[1]);let i={};for(t=0;t<n.length;t++)i[o[t]]=n[t];if(this.injectParams){var s=this.injectParams(e);for(const r in s)i[r]=s[r]}return i}async _route(e){let t={};e.state&&(t=e.state);const n=this.routes.map(e=>({route:e,result:location.pathname.match(this._pathToRegex(e.path))}));let o=n.find(e=>null!==e.result);if(o){if(!this.beforeRoute||!1!==this.beforeRoute.apply(this,o.route)){e=this._getParams(o);const i=new o.route.view(e),s=(i.state=t,document.querySelector(this.targetEl));s.innerHTML="",s.appendChild(i),this.afterRoute&&this.afterRoute(o.route)}}else this.navigateTo("/404notfound"+location.pathname)}getQueryParam(e){let t=new URLSearchParams(location.search);return t.get(e)}navigateTo(e,t={},n={}){let o="";if(0<Object.keys(t).length){var i,s,t=objectToMap(t);o+="?";for([i,s]of t){var r=encodeURIComponent(i);let e=s;"object"==typeof s&&(e=JSON.stringify(s));var a=encodeURIComponent(e);o+=r+`=${a}&`}}history.pushState(n,null,""+e+o),this._route({state:n})}}const application=(e,t,n=DefaultPageNotFound)=>(window._router=new Router(e,t,n),window.navigateTo=window._router.navigateTo.bind(window._router),window.addEventListener("popstate",e=>{window._router._route({state:e.state})}),{routes:t,targetElement:e,router:window._router,afterRoute:e=>{window._router.afterRoute=e.bind(window._router)},beforeRoute:e=>{window._router.beforeRoute=e.bind(window._router)},injectParams:e=>{window._router.injectParams=e.bind(window._router)},onRenderComplete:e=>{window._router.onRenderComplete=e.bind(window._router)},go:()=>{window._router._route({})}});var nerdjslibrary={alertPosition:alertPosition,alert:alert,confirm:confirm,PopupMenu:PopupMenu,PopupMenuItem:PopupMenuItem,showPopup:showPopup,hidePopup:hidePopup,shim:shim,spinner:spinner,fetcher:fetcher,GraphQL:GraphQL,debounce:debounce,objectToMap:objectToMap,SessionService:SessionService,ErrTokenExpired:ErrTokenExpired,application:application,BaseView:BaseView};export{nerdjslibrary as default};